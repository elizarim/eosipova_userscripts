# СЦЕНАРИИ, РЕАЛЬЗОВАННЫЕ ПЕРВЫМИ

## Сценарий визуализации диаграммы

Сценарий визуализации диаграммы был реализован в приложении первым ещё в рамках создания консольного приложения. Эта часть проекта является самой сложной. В отличие от других частей программы здесь не было возможности воспользоваться какими-либо обучающими материалами в виде книг, статей или курсов, а весь алгоритм упаковки окружностей, начиная с математики, нужно было придумывать самостоятельно.

Реализация сценария визуализации декомпозируется на две большие подзадачи: упаковка окружностей и отрисовка.

Алгоритм упаковки состоит из следующих шагов. Сначала для листьев дерева создаются окружности, используя их радиус. Далее окружности, находящиеся на одном уровне иерархии, упорядочиваются в спираль. После упорядочивания ищется окружность, которая располагается на плоскости таким образом, чтобы спираль оказалась в её середине. Процесс продолжается рекурсивно до корня дерева.

Алгоритм отрисовки идёт также рекурсивно, но в обратном направлении. Используется метод обхода дерева в глубину. Иными словами, сначала отрисовывается корневая окружность, а далее её дочерние окружности. Процесс продолжается рекурсивно вплоть до листьев дерева.

## Сценарии регистрации, логина и сохранения диаграммы на сервере

Данный сценарий был вторым по хронологии. Главная сложность этой части состояла в необходимости освоения большого количества материала, связанного с разработкой бекендов.

Поскольку при реализации первого сценария я достаточно хорошо изучила язык программирования Swift, для написания серверной части проекта я решила использовать его же. Самым популярным фреймворком в этой области оказался [Vapor](https://vapor.codes/). В его официальной документации мне оказалось достаточно много подходящего для моих нужд кода, который можно было применить с минимальными изменениями, благодаря чему удалось уложиться в заданные сроки. В числе прочего там содержалася код реализации сценариев логина и регистрации. Реализация прочих методов API работы с диаграммой была в высокой степени сходна с имевшимся в документации кодом для работы с сущностями ToDo-листа. 

Отдельно хочу отметить поставляющуюся вместе с фреймворком консольную утилиту, которая не только генерирует шаблонный проект, но и файлы Docker для его сборки и запуска. Их мне совсем не пришлось менять, но для понимания происходящих в них процессов я просмотрела трёхчасовой [курс](https://www.youtube.com/watch?v=_uZQtRyF6Eg) по Docker.
