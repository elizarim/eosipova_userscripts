# Елизавета Осипова - "Редактор иерархических диаграмм - РИД - 1"
# Пользовательские сценарии

### Группа: 11И1
### Электронная почта: lizaosipova@list.ru
### VK: www.vk.com/elizarim

### [ Сценарий 1 - Приветствие пользователя ]

1. Пользователю показывается окно, в котором предлагается выбрать одно из трех действий: создать новую диаграмму, открыть файл на диске с ранее созданной диаграммой, выбрать ранее созданную диаграмму из списка недавних диаграмм.
2. При нажатии на кнопку создания новой диаграммы приложение открывает системный диалог создания файла, где можно выбрать его имя и расположение на диске. В случае успеха запускается главное окно приложения через которое осуществляется доступ к основным сценариям работы с диаграммой, а путь к файлу сохраняется в списке недавних диаграмм. В случае отмены происходит возврат в окно выбора действий.
3. При нажатии на кнопку загрузки существующей диаграммы приложение открывает системный диалог выбора файла на диске. В случае успеха запускается главное окно приложения через которое осуществляется доступ к основным сценариям работы с диаграммой. В случае отмены происходит возврат в окно выбора действий. Приложение позволяет открывать только файлы в собственном формате с расширением "de" (происходит от первых букв названия программы DiagramEditor). При попытке открыть файлы, созданные какой-либо другой программой, приложение сообщает об ошибке открытия файла с помощью системного алерта и после его закрытия возвращает в окно выбора действий.
4. Окно содержит список файлов с недавними диаграммами. При двойном клике левой кнопкной мыши на любой файл из списка приложение пытается прочитать его содержимое с диска. Обработка успеха и неуспеха аналогична обозначенным в пункте 3 данного сценария.
5. Список недавних файлов позволяет взамодействовать с ним с помощью контекстного меню, появляющегося при нажатии на элементе правой кнопкой мыши. Меню содержит три действия: показать в Finder (открывает в системном эксплорере файлов macOS окно с содержащей файл папкой), скопировать путь (копирует путь к файлу на диске в буфер обмена), удаление (приводит к забыванию программой о существовании данного файла, оставляя его при это на диске).

### [ Сценарий 2 –  Редактирование диаграммы ]

1. Для редактирования диаграммы главное окно программы содержит раздел с деревом всех элементов диаграммы и раздел со свойствами выбранного элемента.
2. Раздел с деревом элементов позволяет задавать структуру иерархии диаграммы. Для этого в нём предусмотрены тулбар и контекстное меню.
3. При нажатии правой кнопкой мыши на отдельный элемент в дереве появляется контекстное меню. Состав пунктов меню зависит от типа элемента. Листовой элемент характеризуется именем, размером и цветом. Для него в меню доступны два действия: переименовать и удалить. Групповой элемент может содержать дочерние элементы, поэтому кроме удаления и переименования в контекстном меню для него есть дополнительные действия для создания как листового, так и группового дочернего элемента.
4. Внизу дерева элементов расположен тулбар. В нём есть кнопка с иконкой "+". При её нажатии появляется контекстное меню с действиями по добавлению дочерних элементов как в контекстном меню пункта 3. В качестве родительского элемента выбирается либо выбранный в данный момент в дереве элемент, если это групповой элемент, либо родительский, если выбран листовой элемент.
5. Раздел свойств выбранного элемента диаграммы позволяет посмотреть и отредактировать его атрибуты. Состав свойств зависит от типа элемента. Листовому элементу можно задать размер и выбрать цвет. Групповому элементу можно только задать цвет.
6. Выбор цвета элемента осуществляется с помощью специального диалогового окна. Окно появляется по нажатию на кнопку рядом с визуализацией текущего цвета в окне свойств.
7. Раздел свойств синхронизирован с в деревом элементов. Как только пользователь изменяет текущий элемент в дереве, интерфейс окна свойств сразу же заполняется его атрибутами.

### [ Сценарий 3 –  Визуализация диаграммы ]

1. Главное окно редактора содержит раздел с визуализацией диаграммы. Его главное предназначение – дать пользователю представление о том, как будет выглядеть диаграмма после её экспорта в виде графического изображения.
2. Диаграмма перестраивается после любого изменения её структуры, описанном в Сценарии 2.
3. Диаграмма перекрашивает свои элементы сразу же после внесения изменений в атрибуты элемента в разделе его свойств, описанном в Сценарии 2.
4. Диаграмма позволяет выбрать текущий элемент. Текущий элемент выделяется с помощью специальной обводки. При выборе элемента он одновременно становится выбранным в разделе дерева элементов и в разделе свойств.
5. При выборе элемента в дереве он становится выбранным и в графическом представлении.

### [ Сценарий 4 – Экспорт и сохранение диаграммы ]

1. Основное меню приложения содержит пункт экспорта диаграммы. При экспорте диаграммы появляется диалог, в котором предлагается выбрать путь и имя сохраняемого изображения, высоту и ширину картинки. Выбор пути к файлу осуществляется с помощью системного диалога.
2. Основное меню приложения содержит пункт сохранения диаграммы. Диаграмма сохраняется в собственном формате с расширением "de" (происходит от первых букв названия программы DiagramEditor).
3. Операционная система macOS распознаёт файлы с расширением "de" и при выборе такого файла предлагает его открыть в разработанном приложении.
4. Сохранённый файл появляется в разделе Недавние в окне приветствия в Сценарии 1.

### [ Сценарий 5 - Регистрация пользователя во облачном хранилище ]

1. Главное окно приложения содержит раздел для просмотра разных версий диаграммы, сохраненных ранее в облачном хранилище. Если пользователь не имеет в нём учётной записи, то он может её создать. Для регистрации нужно нажать в тулбаре раздела на кнопку с иконкой человечка и в появившемся меню выбрать пункт регистрации нового пользователя. По её нажатии появляется форма ввода данных учётной записи, требующая прохождения ниже указанных шагов.
2. Пользователь вводит имя учётной записи, с которым он будет заходить в систему
3. Пользователь вводит пароль, с которым он будет заходить в систему
4. Пользователь вводит подтверждение пароля из предыдущего пункта, чтобы исключить опечатки.
5. Если выбранное имя учётной записи уже существует в системе, то пользователю сообщается об этом и предлагается придумать новое.
6. Если пароль содержит менее 8 символов, система сообщает, что пароль должен быть от 8 и пользователь должен придумать новый пароль
7. Запускается Сценарий 7 - Работа с версиями диаграммы в облачном хранилище.

### [ Сценарий 6 - Логин пользователя в облачное хранилище ]

1. Если пользователь имеет учётную запись в облачном хранилище, то он может в неё войти. Для этого нужно в тулбаре раздела, посвящённому работе с облачным хранилищем, нажать на кнопку с иконкой человечка и в появившемся меню выбрать пункт входа. По её нажатии появляется форма ввода данных учётной записи, требующая прохождения ниже указанных шагов.
2. Пользователь вводит имя учётной записи.
3. Пользователь вводит пароль
4. Если сочетание имени и пароля отсутствует на сервере, то программа выводит сообщение об ошибке, иначе запускается Сценарий 7 - Работа с версиями диаграммы в облачном хранилище.

### [ Сценарий 7 - Работа с версиями диаграммы в облачном хранилище ]

1. Специальный раздел в главном окне приложения посвящён сохранению и загрузке диаграммы в облачное хранилище. Для его активации необходимо пройти шаги регистрации или входа, описанные соответственно в Сценарии 5 и Сценарии 6.
2. Для деактивации раздела в его тулбаре пользователь должен нажать на кнопку с иконкой человечка и в появившемся меню выбрать пункт выхода.
3. Пользователь может удалить учётную запись вместе со всеми ранее сохранёнными диаграммами, выбрав соответствующий пункт меню по нажатию на кнопку с иконкой человечка в тулбаре раздела.
4. Раздел содержит все версии диаграммы, сохраненные ранее в облачном хранилище. Элементы списка версий отсортированы в обратном хронологическом порядке и содержат дату сохранения. Раздел обновляется либо автоматически при заходе в него, либо вручную по нажатию на соответствующую кнопку в тулбаре.
5. При нажатии правой кнопкой мыши на элемент в истории версий появляется контекстное меню, содержащие пункты для загрузки выбранной версии или её удаления из истории.
6. Текущее состояние диаграммы можно сохранить в облачное хранилище. Для этого пользователь должен нажать на кнопку с иконкой обвновления (скруглённая стрелочка) и в появившемся меню выбрать пункт сохранения.